\documentclass{article}
\usepackage{fontspec}
\usepackage{luacode}
\usepackage{tikz}
\usepackage{circuitikz}
\usepackage{amsmath}
\usepackage{exam}
\usepackage{array}
\usepackage{booktabs}

\begin{document}

\title{Method 4 - LuaLaTeX Test Document}
\maketitle

\section{LuaLaTeX Special Features}

\begin{luacode}
function factorial(n)
  if n == 0 then
    return 1
  else
    return n * factorial(n - 1)
  end
end
tex.print("Factorial of 5 is " .. factorial(5))
\end{luacode}

\section{Mathematical Content}
Complex math: $\int_{0}^{\infty} e^{-x^2} dx = \frac{\sqrt{\pi}}{2}$

\begin{align}
E &= mc^2\\
F &= ma\\
\nabla \times \vec{E} &= -\frac{\partial \vec{B}}{\partial t}
\end{align}

\section{TikZ Graphics}
\begin{tikzpicture}
\draw[thick,rounded corners=8pt] (0,0) -- (0,2) -- (1,3.25) -- (2,2) -- (2,0) -- (0,0);
\draw[thick,dashed] (0,0) -- (2,2);
\draw[thick,dashed] (0,2) -- (2,0);
\draw (0,0) circle (1cm);
\end{tikzpicture}

\section{Circuit Diagrams}
\begin{circuitikz}
\draw (0,0) to[V,v=$V_s$] (0,2) to[R,l=$R_1$] (2,2) to[R,l=$R_2$] (2,0) -- (0,0);
\draw (2,2) to[C,l=$C$] (4,2) to[L,l=$L$] (4,0) -- (2,0);
\end{circuitikz}

\section{Tabular Data}
\begin{table}[h]
\centering
\begin{tabular}{|c|c|c|}
\hline
Method & Speed & Quality \\
\hline
pdflatex & Fast & Good \\
xelatex & Medium & Excellent \\
lualatex & Medium & Very Good \\
\hline
\end{tabular}
\caption{Comparison of LaTeX engines}
\end{table}

\section{Exam Questions}
\begin{questions}
\question What is the derivative of $x^2$?
\begin{parts}
\part $2x$
\part $x$
\part $2x^2$
\end{parts}

\question Solve for $x$: $2x + 5 = 11$
\begin{subparts}
\subpart Show your work
\subpart Verify your answer
\end{subparts}
\end{questions}

\end{document}
